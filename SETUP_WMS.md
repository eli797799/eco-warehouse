# ğŸ“¦ Eco Warehouse Management System (WMS) - Setup Guide

## âš ï¸ ×—×©×•×‘ - ×¦×¢×“×™× ×”× ×“×¨×©×™×

×”××¢×¨×›×ª ×©×“×¨×’×” ×-ERP ××•×¨×›×‘ ×œÙ€ WMS ×¤×©×•×˜ ×•×˜×”×•×¨. ×‘×¦×¢ ××ª ×”×¦×¢×“×™× ×”×‘××™× ×‘×¡×“×¨:

## 1ï¸âƒ£ ×”×¨×¥ ××ª ××™×’×¨×¦×™×™×ª ×”SQL

**×˜×‘×œ××•×ª ×™×©× ×•×ª ×™×™××—×§×•! ×‘×“×•×§ Backup ×ª×—×™×œ×”.**

```sql
-- Copy-paste ××ª ×”×§×•×“ ××ª×•×š:
sql/migrations/2026-01-08-wms-clean-schema.sql
```

×”×¦×¢ ××ª ×”×§×•×“ ×‘-Supabase SQL Editor:
1. ×”×›× ×¡ ×œ [Supabase Dashboard](https://app.supabase.com)
2. ×‘×—×¨ ××ª ×”×¤×¨×•×™×§×˜ ×©×œ×š
3. ×¢×‘×•×¨ ×œ SQL Editor
4. Paste ××ª ×”×§×•×“ ××”×§×•×‘×¥
5. ×œ×—×¥ "Run"

**××” ×™×§×¨×”:**
- âœ… ×˜×‘×œ××•×ª ×™×©× ×•×ª (products, production_runs, recipes, waste_tracking) ×™×™××—×§×•
- âœ… ×˜×‘×œ×” `items` ×—×“×©×” ×ª×•×•×¦×¨
- âœ… ×˜×‘×œ×” `inventory_movements` ×—×“×©×” ×ª×•×•×¦×¨  
- âœ… 3 views ×™×•×•×¦×¨×•: `current_stock_view`, `low_stock_alerts`, `todays_movements`
- âœ… RLS policies ×××•×¤×©×¨×•×ª

## 2ï¸âƒ£ ×ª×—×“×© ××ª Local Environment

```bash
npm install
npm run dev
```

## 3ï¸âƒ£ ×”× ×•×•×˜ ××œ http://localhost:3000

### ×“×£ ×”×‘×™×ª (×œ×•×— ××—×•×•× ×™×)
- ğŸ“Š KPI Cards: ×¡×š ×”×¤×¨×™×˜×™×, ×”×ª×¨××•×ª ××œ××™ × ××•×š, ×ª× ×•×¢×•×ª ×”×™×•×
- ğŸ“¦ ×˜×‘×œ×” ×¢× ××œ××™ ×¢×“×›× ×™ (××“×•× ×œ×©×•×¨×•×ª ×¢× ××œ××™ × ××•×š)
- ğŸ“‹ ×˜×‘×œ×” ×¢× ×ª× ×•×¢×•×ª ×”×™×•×

### ×ª×¤×¨×™×˜ ×”× ×™×•×•×˜

| ×œ×™× ×§ | ×¢××•×“ | ×ª×™××•×¨ |
|------|------|--------|
| ğŸ“¦ ×œ×•×— ××—×•×•× ×™× | `/` | Dashboard ×¢× KPIs ×•××œ××™ |
| ğŸ“¥ ×§×‘×œ×” | `/inventory` | ×”×•×¡×£ ××œ××™ ×—×“×© (×§×‘×œ×•×ª) |
| ğŸ“‹ ×—×•××¨×™× | `/materials` | × ×™×”×•×œ ×¤×¨×™×˜×™× ×•×¡×¤×™ ××–×”×¨×” |
| ğŸ“¤ ×”×•×¦××” | `/issue` | ×¨×©×•× ×”×•×¦××•×ª ××”××—×¡×Ÿ |
| ğŸ“œ ×ª× ×•×¢×•×ª | `/reception` | ×—×¤×© ×‘×”×™×¡×˜×•×¨×™×™×ª ×ª× ×•×¢×•×ª |

## ğŸ—‚ï¸ ××‘× ×” ×”×˜×‘×œ××•×ª ×”×—×“×©

### `items` ×˜×‘×œ×”
```sql
id (uuid)
name (varchar) -- UNIQUE
unit_type (kg|liters|units|meters|pieces)
min_stock (numeric)
created_at
updated_at
```

### `inventory_movements` ×˜×‘×œ×”
```sql
id (uuid)
item_id (FK -> items)
quantity (numeric - positive)
movement_type ('IN'|'OUT')
notes (text)
date (timestamptz)
created_at
```

### Views (×©×§×•×¤×™× ×‘×œ×‘×“ - Read Only)
- **current_stock_view**: ×—×™×©×•×‘ ×¡×š ×”××œ××™ ×œ×¤×¨×™×˜ (SUM IN - SUM OUT)
- **low_stock_alerts**: ×¤×¨×™×˜×™× ×©××œ××™×™× <= min_stock
- **todays_movements**: ×ª× ×•×¢×•×ª ××”×™×•× ×‘×œ×‘×“

## ğŸš€ ×¡×“×¨ ×”×¢×‘×•×“×” ×”××•××œ×¥

1. **×™×•×¦×¨×™× ×¤×¨×™×˜×™×** (×“×£ ×—×•××¨×™×)
   - ×©× ×”×¤×¨×™×˜
   - ×™×—×™×“×ª ××™×“×”
   - ×¡×£ ××–×”×¨×” (××™× ×™××•×)

2. **××•×¡×™×¤×™× ××œ××™ ×¨××©×•× ×™** (×“×£ ×§×‘×œ×”)
   - ×‘×—×¨×• ×¤×¨×™×˜
   - ×”×›× ×¡×• ×›××•×ª
   - ×”×•×¡×™×¤×• ×”×¢×¨×” (××§×•×¨)

3. **×‘×“×™×§×” ×‘×“××©×‘×•×¨×“**
   - ×¦×¤×™×™×” ×‘×¡×š ×”×¤×¨×™×˜×™×
   - ×¦×¤×™×™×” ×‘×”×ª×¨××•×ª ××œ××™ × ××•×š
   - ×¦×¤×™×™×” ×‘×ª× ×•×¢×•×ª ×”×™×•×

4. **×¨×™×©×•× ×”×•×¦××•×ª** (×“×£ ×”×•×¦××”)
   - ×‘×—×¨×• ×¤×¨×™×˜
   - ×”×›× ×¡×• ×›××•×ª ×”×•×¦××”
   - ×”××œ××™ ×™×ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª

5. **×¢×“×›×•×Ÿ ×”×¡×‘×¨×™×** (×“×£ ×ª× ×•×¢×•×ª)
   - ×—×™×¤×•×© ×œ×¤×™ ×©× ×¤×¨×™×˜
   - ×¡×™× ×•×Ÿ ×œ×¤×™ ×¡×•×’ (×§×‘×œ×”/×”×•×¦××”)
   - ×¦×¤×™×™×” ×‘×”×¢×¨×•×ª

## âœ¨ ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª

âœ… **Dashboard ×¢× KPIs:**
- ×¡×š ×”×¤×¨×™×˜×™× ×‘××—×¡×Ÿ
- ××¡×¤×¨ ×”×ª×¨××•×ª ××œ××™ × ××•×š
- ××¡×¤×¨ ×ª× ×•×¢×•×ª ×”×™×•×

âœ… **× ×™×”×•×œ ×¤×¨×™×˜×™×:**
- ×”×•×¡×£ ×¤×¨×™×˜×™× ×—×“×©×™×
- ×§×‘×¢ ×¡×£ ××–×”×¨×” (min_stock)
- ×‘×—×¨ ×™×—×™×“×ª ××™×“×” (×§×´×’, ×œ×™×˜×¨, ×•×›×•×³)
- ××—×§ ×¤×¨×™×˜×™×

âœ… **×¨×™×©×•× ×§×‘×œ×•×ª:**
- ×‘×—×¨ ×¤×¨×™×˜
- ×”×›× ×¡ ×›××•×ª
- ×”×•×¡×£ ×”×¢×¨×•×ª (××¡×¤×¨ ×”×–×× ×”, ×¡×¤×§, ×•×›×•×³)

âœ… **×¨×™×©×•× ×”×•×¦××•×ª:**
- ×‘×—×¨ ×¤×¨×™×˜
- ×”×›× ×¡ ×›××•×ª
- ×”×•×¡×£ ×”×¢×¨×•×ª (×©×™××•×©, ×œ×§×•×—, ×•×›×•×³)

âœ… **×”×™×¡×˜×•×¨×™×” ×•×—×™×¤×•×©:**
- ×—×¤×© ×œ×¤×™ ×©× ×¤×¨×™×˜
- ×¡× ×Ÿ ×œ×¤×™ ×¡×•×’ ×ª× ×•×¢×”
- ×¦×¤×” ×‘×ª××¨×™×š/×©×¢×” ××“×•×™×§×ª

## ğŸ”§ Troubleshooting

### âŒ ×©×’×™××”: "Failed to load items"
- ×‘×“×•×§ ×©×”××™×’×¨×¦×™×” ×”×¨×¦×” ×‘×”×¦×œ×—×”
- ×•×•×“× ×©×”-environment variables × ×›×•× ×™× (NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY)

### âŒ ×©×’×™××”: "Hydration mismatch"
- ×›×œ ×”×¢××•×“×™× ×¢×“×›× ×•× ×™ ×œ×”×©×ª××© ×‘-Server Components (async functions)
- ×‘××™×“×ª ×”×¦×•×¨×š, ×¤×¢×œ `npm run dev` ××—×“×©

### âŒ Supabase RLS Errors
- ×•×•×“× ×©×”×•×¨×™×ª×™ RLS ×¤×¢×™×œ×™× ×‘×˜×‘×œ××•×ª
- ×‘×“×•×§ ×©×”-policies ××•×’×“×¨×™× ×›-"Public access"

## ğŸ¯ ××” ×§×•×¨×” ×‘×¤×¨×•×™×§×˜

- âœ… Schema ×—×“×© ×˜×”×•×¨ (items + inventory_movements)
- âœ… ×›×œ ×”-Dashboards ××¢×•×“×›× ×™×
- âœ… ×›×œ ×”×“×¤×™× ××¢×•×“×›× ×™×
- âœ… ×©×•× ×§×•×“ "Production" ××• "Recipes" ×‘×©×™××•×© ×¢×•×“

## ğŸ“ ×©××œ×•×ª?

×× ×™×© ×©×’×™××•×ª:
1. ×‘×“×•×§ ××ª Supabase Dashboard
2. ×‘×“×•×§ ××ª Browser Console (F12) ×œ×©×’×™××•×ª
3. ×•×•×“× ×©×”×¢×‘×¨×ª ××ª ×”× ×ª×•× ×™× ×”× ×›×•× ×™×

---

**×–×• ×’×¨×¡×” 1.0 ×©×œ WMS ×˜×”×•×¨ - ×œ×œ× ×™×™×¦×•×¨, ××ª×›×•× ×™×, ××• ×—×™×©×•×‘×™ ×¢×œ×•×™×•×ª!**
